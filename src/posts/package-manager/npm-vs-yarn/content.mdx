---
title: 'npm vs Yarn, 어떤 패키지 매니저를 선택해야 할까?'
thumbnail: '/posts/package-manager/npm-vs-yarn/1.png'
createdAt: '2025. 02. 03'
---

![](/posts/package-manager/npm-vs-yarn/1.png)

<br />

프론트엔드 개발을 하다 보면 패키지 매니저를 사용할 일이 많습니다. 대표적인 패키지 매니저로는 npm과 Yarn이 있으며, 어떤 것을 선택해야 할지 고민하는 경우가
많습니다. 이번 글에서는 npm과 Yarn의 주요 차이점, 각자의 장단점, 그리고 어떤 상황에서 어떤 패키지 매니저를 선택하는 것이 좋을지에 대해 알아보겠습니다.

---

## 1. 패키지 매니저란?

프로그래밍을 할 때 여러 개의 라이브러리를 사용하게 되는데, 이를 수동으로 관리하면 버전 충돌, 의존성 문제, 업데이트 불일치 등의 문제가 발생할 수 있습니다. 패키지 매니저(Package Manager)는 이러한 문제를 해결하고, 라이브러리 및 모듈을 효율적으로 관리할 수 있도록 돕는 도구입니다.

### 패키지 매니저의 역할

- **패키지 설치**: 필요한 라이브러리를 손쉽게 설치합니다. `npm install package-name`
- **의존성 관리**: 프로젝트에 필요한 패키지를 자동으로 관리합니다.
- **버전 관리**: 특정 버전의 패키지를 유지하거나 업데이트할 수 있습니다.
- **캐싱 및 최적화**: 캐싱을 통해 이미 설치된 패키지를 재사용함으로써 설치 시간을 단축하고 네트워크 사용량을 줄입니다.

자바스크립트 생태계에서는 대표적으로 npm과 Yarn이 사용됩니다.

---

## 2. npm과 Yarn이란?

### npm (Node Package Manager)

npm은 Node.js와 함께 기본적으로 제공되는 패키지 매니저입니다. Node.js를 설치하면 자동으로 설치되며, 가장 널리 사용되는 패키지 매니저 중 하나입니다.

```bash
npm install react
npm run build
```

### Yarn

Yarn은 Facebook(현재 Meta)에서 npm의 단점을 보완하기 위해 만든 패키지 매니저입니다. 처음 등장했을 때는 성능과 보안 측면에서 npm보다 앞섰지만, 이후 npm이 빠르게 개선되면서 차이가 많이 줄어들었습니다.

```bash
yarn add react
yarn build
```

---

## 3. npm과 Yarn의 주요 차이점 및 비교

### 1. 속도

Yarn은 캐싱과 병렬 다운로드 기능을 통해 패키지 설치 속도가 더 빠릅니다. 반면, npm은 순차적으로 패키지를 설치하는 방식을 사용하지만, 최신 버전에서는 속도가 개선되었습니다.

#### 캐싱(Cache) 차이

- **npm**: 패키지를 다운로드할 때마다 네트워크 요청을 수행하므로 설치 속도가 느릴 수 있습니다.
- **Yarn**: 한 번 다운로드한 패키지를 캐싱하여, 같은 패키지를 다시 설치할 때 네트워크 요청 없이 빠르게 설치할 수 있습니다.

#### 병렬 다운로드 차이

- **npm**: 패키지를 하나씩 순차적으로 설치하는 방식입니다.
- **Yarn**: 여러 패키지를 동시에 다운로드하여 설치 속도를 개선합니다.

### 2. 패키지 관리 방식 (package-lock.json vs yarn.lock)

패키지 매니저는 프로젝트의 의존성을 Lockfile에 저장하여 일관된 환경을 유지합니다. Lockfile은 팀원 간의 일관성을 보장하고, 배포 환경에서 동일한 패키지 버전을 사용하여 예기치 않은 오류를 방지하는 데 중요한 역할을 합니다. 하지만 npm과 Yarn의 방식에는 중요한 차이가 있습니다.

#### package-lock.json (npm)

- npm은 패키지 설치 시 `package-lock.json` 파일을 생성하여 의존성을 기록합니다.
- 의존성 트리를 해석하고, 하위 패키지들의 종속성을 해결하는 방식으로 동작합니다.
- 최신 안정적인 패키지 버전을 설치하면서도, `package-lock.json`을 통해 일관성을 유지합니다. 이는 팀원 간의 개발 환경을 통일하는 데 도움을 줍니다.

```json
{
  "name": "my-project",
  "dependencies": {
    "react": {
      "version": "18.2.0",
      "resolved": "https://registry.npmjs.org/react/-/react-18.2.0.tgz"
    }
  }
}
```

#### yarn.lock (Yarn)

- Yarn은 `yarn.lock` 파일을 사용하여 패키지 버전을 고정합니다.
- 동일한 패키지 버전을 유지하여 팀원 간의 환경 차이를 방지합니다. 이는 프로젝트의 일관성을 높이는 데 기여합니다.
- 의존성 해석 속도가 빠르며, 캐싱을 적극적으로 활용하여 속도를 최적화합니다. Yarn은 명시된 버전을 고정하여 일관성을 유지하는 데 중점을 둡니다.

```yaml
react@^18.2.0: version "18.2.0"
  resolved "https://registry.yarnpkg.com/react/-/react-18.2.0.tgz"
```

### 3. 보안 (Security)

**npm과 Yarn은 모두 보안 기능을 제공하지만, 접근 방식이 다릅니다.**

#### 1. npm 보안 기능

npm은 보안 취약점을 감지하고 해결하는 기능을 제공합니다.

- `npm audit`: 설치된 패키지의 보안 취약점을 스캔하여 경고를 출력합니다.
- `npm audit fix`: 발견된 취약점을 자동으로 수정합니다.
- `npm audit fix --force`: 강제 업데이트를 수행하여 보안 문제를 해결합니다.

**📌 보안 단점:**

- 패키지 의존성이 복잡할 경우, 취약점 해결이 어려울 수 있습니다.
- `node_modules` 폴더가 커질수록 보안 리스크가 증가합니다.

#### 2. Yarn의 보안 접근 방식

Yarn은 보안 강화를 위해 Plug’n’Play (PnP) 기능을 제공합니다. PnP는 기존의 `node_modules` 폴더 없이 패키지를 설치하고 사용하는 새로운 패키지 관리 방식입니다. 이 기능은 패키지를 ZIP 파일로 저장하고 런타임에 직접 로드하여, 패키지 관리의 효율성을 높이고 보안을 강화합니다.

**📌 PnP의 핵심 특징**

1. **`node_modules` 폴더 제거**:

   - PnP는 패키지를 ZIP 파일로 저장하고 런타임에 직접 로드하여, 기존 npm이나 Yarn 1에서 생성되는 `node_modules` 폴더를 제거합니다.

2. **더 빠른 패키지 로딩 속도**:

   - `node_modules` 폴더를 탐색할 필요 없이 필요한 패키지를 빠르게 찾을 수 있습니다. 패키지가 많아질수록 성능 차이가 커집니다.

3. **보안 향상**:
   - 프로젝트에서 필요한 패키지만 로드하도록 제한하여 무분별한 패키지 접근을 방지합니다. 의존성이 복잡한 경우에도 보안이 유지됩니다.
   - **`yarn audit`**: npm과 유사하게 보안 검사를 실행하여 설치된 패키지의 취약점을 스캔합니다.

**📌 보안 장점:**

- `node_modules`가 없기 때문에 악성 코드가 무작위로 실행될 위험이 감소합니다.
- 특정 패키지에서만 접근 가능한 스코프를 제한하여 보안을 강화합니다.

**📌 PnP의 단점:**

- 기존 `node_modules` 폴더와의 호환성이 떨어질 수 있습니다.
- 일부 도구(Webpack, Jest 등)에서 추가 설정이 필요할 수 있습니다.

## 4. 모노레포 지원

모노레포(Monorepo)는 하나의 저장소에서 여러 개의 패키지를 관리하는 방식입니다. 이 접근 방식은 대규모 프로젝트에서 코드 관리와 팀 간의 협업을 용이하게 합니다. 모노레포를 사용하면 패키지 간의 의존성을 쉽게 관리하고, 코드의 일관성을 유지할 수 있습니다.

### 1. npm Workspaces

npm은 모노레포를 지원하기 위해 Workspaces 기능을 제공합니다. 이 기능은 여러 패키지를 하나의 저장소에서 관리할 수 있게 해줍니다. 그러나 npm Workspaces는 `node_modules`를 기반으로 하며, 종속성이 중복 설치될 가능성이 있습니다.

```json
{
  "private": true,
  "workspaces": ["packages/"]
}
```

**장점:**

- 간단한 설정으로 여러 패키지를 관리할 수 있습니다.
- 팀원 간의 협업이 용이합니다.

**단점:**

- 의존성이 중복 설치될 수 있어, 성능이 저하될 수 있습니다.
- `node_modules`를 기반으로 하므로, 패키지 관리가 비효율적일 수 있습니다.

### 2. Yarn Workspaces

Yarn은 Workspaces 기능을 통해 모노레포를 지원하며, Plug’n’Play (PnP)와 같은 고급 기능을 활용하여 패키지를 더 효율적으로 관리합니다.

```json
{
  "private": true,
  "workspaces": ["packages/"]
}
```

**장점:**

- PnP를 통해 `node_modules` 폴더 없이 패키지를 관리하여 성능을 향상시킵니다.
- 의존성 중복 설치 문제를 최소화하여, 대규모 프로젝트에서 효율적입니다.
- 캐싱 및 종속성 관리가 최적화되어 있어, 빠른 패키지 로딩 속도를 제공합니다.

**단점:**

- PnP를 사용하기 위해 추가 설정이 필요할 수 있습니다.
- 일부 도구(Webpack, Jest 등)와의 호환성 문제가 발생할 수 있습니다.

---

## 4. 어떤 상황에서 어떤 패키지 매니저를 선택해야 할까?

### npm을 선택해야 하는 경우

- Node.js 기본 환경을 그대로 사용하고 싶을 때
- 팀에서 npm을 기본으로 사용하고 있을 때
- 추가 설정 없이 빠르게 개발을 시작하고 싶을 때
- 보안 취약점 자동 감지 및 해결 기능이 중요한 경우

### Yarn을 선택해야 하는 경우

- 대규모 프로젝트나 모노레포 환경에서 성능이 필요할 때
- 패키지 설치 속도를 개선하고 싶을 때
- Plug’n’Play(PnP) 기능을 활용하여 패키지 관리 방식을 개선하고 싶을 때
- npm보다 더 일관된 패키지 설치 방식을 원할 때

---

## 5. 결론

npm과 Yarn은 각기 다른 장점을 가진 패키지 매니저로, 프로젝트의 요구 사항에 따라 선택하는 것이 중요합니다.

- **npm**: 기본적으로 Node.js와 함께 제공되며, 간편하게 사용할 수 있습니다. 간단한 프로젝트나 기본적인 환경 유지, 보안 취약점 자동 감지가 중요한 경우에 적합합니다.
- **Yarn**: 더 빠른 패키지 설치 속도와 Plug’n’Play(PnP)와 같은 고급 기능을 제공합니다. 대규모 프로젝트나 모노레포 환경에서 강력한 기능이 필요할 때 유리합니다.

결국, 팀에서 어떤 패키지 매니저를 사용하는지가 가장 중요한 선택 기준이 될 수 있습니다. 두 도구 모두 충분히 강력하므로, 본인의 프로젝트 환경에 맞게 선택하면 됩니다. 🚀

---

## 6. 추가 패키지 매니저: pnpm과 Yarn Berry

npm과 Yarn 외에도 더 빠르고 효율적인 패키지 관리를 제공하는 **pnpm**과 **Yarn Berry**가 있습니다. 이 두 패키지 매니저는 각각의 고유한 기능과 장점을 가지고 있어, 특정 상황에서 유용하게 사용될 수 있습니다.

#### 📌 pnpm (Performant npm)

- **효율적인 디스크 사용**: `node_modules` 구조를 개선하여 더 적은 공간을 사용하고, 더 빠른 설치 속도를 제공합니다.
- **하드링크와 심볼릭 링크**: 중복 파일 저장을 최소화하여 디스크 공간을 절약합니다.
- **빠른 패키지 설치**: 패키지 설치 속도가 빠르고, 디스크 사용량이 적어 대규모 프로젝트에서 유리합니다.

#### 📌 Yarn Berry (Yarn 2 이상)

- **개선된 패키지 관리**: 기존 Yarn 1에서 대폭 개선된 버전으로, **Plug’n’Play (PnP)**를 기본 패키지 관리 방식으로 사용합니다.
- **`node_modules` 제거**: `node_modules` 없이 패키지를 관리하여 성능과 보안성을 개선합니다.
- **Zero-Installs 기능**: Git 저장소만으로 패키지 관리를 가능하게 하여, 개발 환경 설정을 간소화합니다.

다음 포스트에서는 pnpm과 Yarn Berry의 차이점과 장단점을 더 자세히 다룰 예정입니다. 🚀

---
